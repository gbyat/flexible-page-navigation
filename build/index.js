(()=>{"use strict";var e={n:a=>{var n=a&&a.__esModule?()=>a.default:()=>a;return e.d(n,{a:n}),n},d:(a,n)=>{for(var t in n)e.o(n,t)&&!e.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:n[t]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=wp.blocks,n=wp.i18n,t=wp.blockEditor,l=wp.components,o=wp.element,i=wp.apiFetch;var r=e.n(i);function c(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,l,o,i,r=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===a){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=o.call(n)).done)&&(r.push(t.value),r.length!==a);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw l}}return r}}(e,a)||u(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,a){if(e){if("string"==typeof e)return g(e,a);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,a):void 0}}function g(e,a){(null==a||a>e.length)&&(a=e.length);for(var n=0,t=Array(a);n<a;n++)t[n]=e[n];return t}(0,a.registerBlockType)("flexible-page-navigation/flexible-nav",{edit:function(e){var a=e.attributes,i=e.setAttributes,p=a.contentType,v=a.sortBy,f=a.sortOrder,b=a.depth,d=a.childSelection,s=a.menuDisplayMode,_=a.parentPageId,m=a.accordionEnabled,h=a.columnLayout,C=a.showActiveIndicator,x=(a.separator,a.hoverEffect),E=a.backgroundColor,y=a.textColor,R=a.activeBackgroundColor,S=a.activeTextColor,P=a.activePadding,A=a.childActiveBackgroundColor,w=a.childActiveTextColor,k=a.separatorEnabled,B=a.separatorWidth,I=a.separatorColor,T=a.separatorPadding,D=a.hoverBackgroundColor,O=c((0,o.useState)(!0),2),L=(O[0],O[1]),j=c((0,o.useState)([]),2),M=j[0],F=j[1];(0,o.useEffect)(function(){r()({path:"/wp/v2/posts?per_page=1"}).then(function(){var e=[{label:(0,n.__)("Pages","flexible-page-navigation"),value:"page"},{label:(0,n.__)("Posts","flexible-page-navigation"),value:"post"}],a=["wiki","product","event","portfolio","team","testimonial","faq","service"].map(function(e){return r()({path:"/wp/v2/".concat(e,"?per_page=1")}).then(function(){return{label:e.charAt(0).toUpperCase()+e.slice(1),value:e}}).catch(function(){return null})});Promise.all(a).then(function(a){var n=a.filter(function(e){return null!==e});console.log("Discovered custom types:",n);var t,l=[].concat(e,function(e){if(Array.isArray(e))return g(e)}(t=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());console.log("Final all types:",l),F(l),L(!1)}).catch(function(){console.log("Using fallback types"),F(e),L(!1)})}).catch(function(){F([{label:(0,n.__)("Pages","flexible-page-navigation"),value:"page"},{label:(0,n.__)("Posts","flexible-page-navigation"),value:"post"}]),L(!1)})},[]);var N=(0,t.useBlockProps)({className:"fpn-navigation-editor",style:{backgroundColor:E,color:y,padding:"1rem",border:"1px solid #ddd",borderRadius:"4px"}}),U=[{label:(0,n.__)("Menu Order","flexible-page-navigation"),value:"menu_order"},{label:(0,n.__)("Title","flexible-page-navigation"),value:"title"},{label:(0,n.__)("Date","flexible-page-navigation"),value:"date"},{label:(0,n.__)("ID","flexible-page-navigation"),value:"ID"}],W=[{label:(0,n.__)("Ascending","flexible-page-navigation"),value:"ASC"},{label:(0,n.__)("Descending","flexible-page-navigation"),value:"DESC"}],H=[{label:(0,n.__)("Current Page","flexible-page-navigation"),value:"current"},{label:(0,n.__)("Custom Page","flexible-page-navigation"),value:"custom"}],q=[{label:(0,n.__)("Single Column","flexible-page-navigation"),value:"single"},{label:(0,n.__)("2 Columns","flexible-page-navigation"),value:"2-columns"},{label:(0,n.__)("3 Columns","flexible-page-navigation"),value:"3-columns"},{label:(0,n.__)("4 Columns","flexible-page-navigation"),value:"4-columns"}];return React.createElement(React.Fragment,null,React.createElement(t.InspectorControls,null,React.createElement(l.PanelBody,{title:(0,n.__)("Navigation Settings","flexible-page-navigation"),initialOpen:!0},React.createElement(l.SelectControl,{label:(0,n.__)("Content Type","flexible-page-navigation"),value:p,options:M,onChange:function(e){return i({contentType:e})}}),React.createElement(l.SelectControl,{label:(0,n.__)("Sort By","flexible-page-navigation"),value:v,options:U,onChange:function(e){return i({sortBy:e})}}),React.createElement(l.SelectControl,{label:(0,n.__)("Sort Order","flexible-page-navigation"),value:f,options:W,onChange:function(e){return i({sortOrder:e})}}),React.createElement(l.RangeControl,{label:(0,n.__)("Depth","flexible-page-navigation"),value:b,onChange:function(e){return i({depth:e})},min:1,max:5}),React.createElement(l.SelectControl,{label:(0,n.__)("Menu Display Mode","flexible-page-navigation"),value:s,options:[{label:(0,n.__)("Show Children Only","flexible-page-navigation"),value:"children"},{label:(0,n.__)("Show All Items","flexible-page-navigation"),value:"all"}],onChange:function(e){return i({menuDisplayMode:e})},help:(0,n.__)("Choose whether to show only children or all items of the selected content type","flexible-page-navigation")}),"children"===s&&React.createElement(React.Fragment,null,React.createElement(l.SelectControl,{label:(0,n.__)("Child Selection","flexible-page-navigation"),value:d,options:H,onChange:function(e){return i({childSelection:e})}}),"custom"===d&&React.createElement(l.TextControl,{label:(0,n.__)("Parent Post ID","flexible-page-navigation"),value:_||"",onChange:function(e){return i({parentPageId:parseInt(e)||0})},help:(0,n.__)("Enter the ID of the parent post/page (any post type)","flexible-page-navigation"),type:"number",min:"0"})),React.createElement(l.ToggleControl,{label:(0,n.__)("Enable Accordion","flexible-page-navigation"),checked:m,onChange:function(e){return i({accordionEnabled:e})},help:(0,n.__)("Enable accordion functionality for top-level items","flexible-page-navigation")}),React.createElement(l.SelectControl,{label:(0,n.__)("Column Layout","flexible-page-navigation"),value:h,options:q,onChange:function(e){return i({columnLayout:e})},help:(0,n.__)("Choose how many columns to display the navigation in","flexible-page-navigation")}),React.createElement(l.ToggleControl,{label:(0,n.__)("Show Active Indicator","flexible-page-navigation"),checked:C,onChange:function(e){return i({showActiveIndicator:e})},help:(0,n.__)("Show visual indicator for active page","flexible-page-navigation")}),C&&React.createElement(l.RangeControl,{label:(0,n.__)("Active Item Padding","flexible-page-navigation"),value:P,onChange:function(e){return i({activePadding:e})},min:0,max:20,help:(0,n.__)("Padding for active navigation items (in pixels)","flexible-page-navigation")}),React.createElement(l.SelectControl,{label:(0,n.__)("Hover Effect","flexible-page-navigation"),value:x,options:[{label:(0,n.__)("None","flexible-page-navigation"),value:"none"},{label:(0,n.__)("Underline","flexible-page-navigation"),value:"underline"},{label:(0,n.__)("Background","flexible-page-navigation"),value:"background"},{label:(0,n.__)("Scale","flexible-page-navigation"),value:"scale"}],onChange:function(e){return i({hoverEffect:e})},help:(0,n.__)("Choose hover effect for navigation items","flexible-page-navigation")}),"background"===x&&React.createElement("div",null,React.createElement("label",null,(0,n.__)("Hover Background Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:D,onChange:function(e){return i({hoverBackgroundColor:e})}})),React.createElement(l.ToggleControl,{label:(0,n.__)("Enable Left Border Lines","flexible-page-navigation"),checked:k,onChange:function(e){return i({separatorEnabled:e})},help:(0,n.__)("Show left border lines for submenu items to indicate hierarchy","flexible-page-navigation")}),React.createElement(l.RangeControl,{label:(0,n.__)("Border Line Width","flexible-page-navigation"),value:B,onChange:function(e){return i({separatorWidth:e})},min:1,max:10,help:(0,n.__)("Width of left border lines in pixels","flexible-page-navigation"),disabled:!k}),React.createElement("div",null,React.createElement("label",null,(0,n.__)("Border Line Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:I,onChange:function(e){return i({separatorColor:e})},disabled:!k})),React.createElement(l.RangeControl,{label:(0,n.__)("Submenu Indentation","flexible-page-navigation"),value:T,onChange:function(e){return i({separatorPadding:e})},min:10,max:50,help:(0,n.__)("Left padding/indentation for submenu items in pixels","flexible-page-navigation")})),React.createElement(l.PanelBody,{title:(0,n.__)("Colors","flexible-page-navigation"),initialOpen:!1},React.createElement("div",null,React.createElement("label",null,(0,n.__)("Background Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:E,onChange:function(e){return i({backgroundColor:e})}})),React.createElement("div",null,React.createElement("label",null,(0,n.__)("Text Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:y,onChange:function(e){return i({textColor:e})}})),React.createElement("div",null,React.createElement("label",null,(0,n.__)("Active Background Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:R,onChange:function(e){return i({activeBackgroundColor:e})}})),React.createElement("div",null,React.createElement("label",null,(0,n.__)("Active Text Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:S,onChange:function(e){return i({activeTextColor:e})}})),React.createElement("div",null,React.createElement("label",null,(0,n.__)("Child Active Background Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:A,onChange:function(e){return i({childActiveBackgroundColor:e})}})),React.createElement("div",null,React.createElement("label",null,(0,n.__)("Child Active Text Color","flexible-page-navigation")),React.createElement(t.ColorPalette,{value:w,onChange:function(e){return i({childActiveTextColor:e})}})))),React.createElement("div",N,React.createElement("div",{className:"fpn-editor-preview"},React.createElement("h4",null,(0,n.__)("Flexible Page Navigation","flexible-page-navigation")),React.createElement("p",null,(0,n.__)("Content Type:","flexible-page-navigation")," ",p," |"," ",(0,n.__)("Sort:","flexible-page-navigation")," ",v," (",f,") |"," ",(0,n.__)("Depth:","flexible-page-navigation")," ",b),React.createElement("p",null,(0,n.__)("Child Selection:","flexible-page-navigation")," ",d,"custom"===d&&_>0&&React.createElement("span",null," - ",(0,n.__)("Parent ID:","flexible-page-navigation")," ",_)),React.createElement("p",null,(0,n.__)("Accordion:","flexible-page-navigation")," ",m?(0,n.__)("Enabled","flexible-page-navigation"):(0,n.__)("Disabled","flexible-page-navigation")),React.createElement("p",null,(0,n.__)("Layout:","flexible-page-navigation")," ",h.replace("-"," ").replace(/\b\w/g,function(e){return e.toUpperCase()})))))},save:function(){return null}})})();